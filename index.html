<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Task Manager â€” Task 4</title>

<style>
    :root {
        --bg: #f2f2f2;
        --card: #ffffff;
        --text: #222;
        --primary: #007bff;
        --success: #2ecc71;
        --delete: #e74c3c;
        --pending: #f1c40f;
        --in-progress: #8e44ad;
        --completed: #27ae60;
    }
    body.dark {
        --bg: #121212;
        --card: #1f1f1f;
        --text: #e6e6e6;
    }
    body {
        font-family: Poppins, Arial, sans-serif;
        background: var(--bg);
        margin: 0;
        display: flex;
        justify-content: center;
        transition: 0.3s;
    }
    #container {
        width: 500px;
        background: var(--card);
        padding: 25px;
        margin-top: 30px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.25);
        transition: 0.3s;
    }
    h2 { text-align: center; margin: 6px 0 18px; color: var(--text); }
    label { font-weight: 600; margin-top: 12px; color: var(--text); display: block; }
    input, textarea, select, button {
        width: 100%; padding: 11px; border-radius: 6px; margin-top: 6px;
        border: 1px solid gray; font-size: 15px;
    }
    button { border: none; cursor: pointer; font-weight: bold; }
    button:hover { transform: scale(1.02); }
    #addBtn { background: var(--primary); color: white; }
    #darkBtn { margin-bottom: 12px; background: black; color: white; }

    .task {
        background: var(--bg);
        padding: 15px;
        border-radius: 10px;
        margin-top: 14px;
        transition: 0.3s;
    }
    .task:hover { transform: scale(1.01); }
    .top {
        display: flex; justify-content: space-between;
        font-weight: bold; font-size: 18px; margin-bottom: 5px;
        color: var(--text);
    }
    .badge { padding: 5px 10px; color: white; border-radius: 6px; font-size: 12px; }
    .Low { background: var(--success); }
    .Medium { background: var(--pending); }
    .High { background: var(--delete); }
    .actions { margin-top: 12px; display: flex; justify-content: space-between; }
    .toggle { background: var(--completed); color: white; padding: 9px; border-radius: 6px; }
    .del { background: var(--delete); color: white; padding: 9px; border-radius: 6px; }
    .completed { text-decoration: line-through; opacity: 0.7; }
    .success { text-align: center; margin: 8px; font-size: 16px; color: green; }
    .filters { margin-top: 20px; display: flex; gap: 6px; }
    #search, #filterPriority { flex: 1; }
    @media(max-width: 520px) { #container { width: 90%; } }
</style>
</head>

<body>
<div id="container">

    <button id="darkBtn" onclick="toggleDark()">ðŸŒ™ Toggle Dark Mode</button>

    <h2>Add Task</h2>

    <label>Title *</label>
    <input type="text" id="title">
    <label>Description</label>
    <textarea id="desc"></textarea>
    <label>Priority *</label>
    <select id="priority">
        <option value="">Select Priority</option>
        <option>Low</option>
        <option>Medium</option>
        <option>High</option>
    </select>
    <label>Due Date *</label>
    <input type="date" id="dueDate">
    <label>Status</label>
    <select id="status">
        <option>Pending</option>
        <option>In Progress</option>
        <option>Completed</option>
    </select>

    <button id="addBtn" onclick="addTask()">Add Task</button>
    <div id="successMsg" class="success"></div>

    <div class="filters">
        <input type="text" id="search" placeholder="Search title..." onkeyup="loadTasks()">
        <select id="filterPriority" onchange="loadTasks()">
            <option value="">Priority Filter</option>
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
        </select>
    </div>

    <button onclick="sortTasks()">â¬† Sort by Due Date</button>

    <h2>Task List</h2>
    <div id="taskList"></div>

</div>


<script>
function addTask() {
    let t = title.value.trim(), p = priority.value, d = dueDate.value;
    if (!t) return alert("Title required!");
    if (!p) return alert("Priority required!");
    if (!d) return alert("Due Date required!");

    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    tasks.push({
        title: t, description: desc.value.trim(), priority: p,
        dueDate: d, status: status.value
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));

    title.value = ""; desc.value = ""; priority.value = ""; dueDate.value = ""; status.value = "Pending";
    successMsg.innerHTML = "Task Added Successfully âœ”";
    setTimeout(() => successMsg.innerHTML = "", 1300);
    loadTasks();
}

function loadTasks() {
    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    let search = searchInput.value.toLowerCase();
    let filterP = filterPriority.value;
    let html = "";
    tasks.forEach((t, i) => {
        if (search && !t.title.toLowerCase().includes(search)) return;
        if (filterP && t.priority !== filterP) return;
        let complete = t.status === "Completed" ? "completed" : "";
        html += `
        <div class="task ${complete}">
            <div class="top">
                <span>${t.title}</span>
                <span class="badge ${t.priority}">${t.priority}</span>
            </div>
            <p>${t.description ? t.description.slice(0,100) : ""}</p>
            <p><b>Due:</b> ${new Date(t.dueDate).toLocaleDateString()}</p>
            <p><b>Status:</b> ${t.status}</p>
            <div class="actions">
                <button class="toggle" onclick="toggleStatus(${i})">âœ”</button>
                <button class="del" onclick="deleteTask(${i})">ðŸ—‘ Delete</button>
            </div>
        </div>`;
    });
    taskList.innerHTML = html || "<p>No tasks found</p>";
}

function deleteTask(i) {
    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    tasks.splice(i, 1);
    localStorage.setItem("tasks", JSON.stringify(tasks));
    loadTasks();
}

function toggleStatus(i) {
    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    tasks[i].status = tasks[i].status === "Completed" ? "Pending" : "Completed";
    localStorage.setItem("tasks", JSON.stringify(tasks));
    loadTasks();
}

function sortTasks() {
    let tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    tasks.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
    localStorage.setItem("tasks", JSON.stringify(tasks));
    loadTasks();
}

function toggleDark() { document.body.classList.toggle("dark"); }

const title = document.getElementById("title"),
desc = document.getElementById("desc"), priority = document.getElementById("priority"),
dueDate = document.getElementById("dueDate"), status = document.getElementById("status"),
searchInput = document.getElementById("search"), filterPriority = document.getElementById("filterPriority");

loadTasks();
</script>
</body>
</html>
